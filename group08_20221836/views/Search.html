<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<title>Th∆∞ vi·ªán h·ªçc t·∫≠p</title>
<style>
    /* Thi·∫øt l·∫≠p c∆° b·∫£n */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #1845ad;
      color: #333;
    }

    /* Navbar styling */
    .navbar {
      font-family: "Poppins", sans-serif;
      background-color: #0a1f63;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 40px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      flex-wrap: wrap;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: white;
    }

    .logo span {
      color: #c7ddf4;
    }

    .nav-links {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      padding: 8px 14px;
      border-radius: 20px;
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      background-color: #fffefe;
      color: #0a1f63;
    }

    /* Ph·∫ßn t√¨m ki·∫øm */
    .search-section {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 20px;
      justify-content: center;
      background-color: #1845ad;
    }

    /* √î nh·∫≠p li·ªáu v√† dropdown */
    .search-input, .dropdown {
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
      min-width: 180px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    .dropdown {
      appearance: none;
      background-color: #fff;
    }

    /* N√∫t t√¨m ki·∫øm */
    .search-logo {
      background-color: #ff5c42;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .search-logo:hover {
      background-color: #e04a33;
    }

    /* C√¢u h·ªèi n·ªïi b·∫≠t */
    .highlighted-questions {
      width: 80%;
      margin: 30px auto;
      background-color: #f9f9f9;
      border-left: 5px solid #555;
      padding: 15px;
      border-radius: 5px;
    }

    .highlighted-questions h3 {
      margin-bottom: 15px;
      color: #333;
    }

    .question-thread {
      background: #fff;
      border: 1px solid #ddd;
      padding: 10px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .question-thread:hover {
      background-color: #f1f1f1;
    }

    .question-thread .title {
      color: #5e2ca5;
      text-decoration: underline;
      font-weight: bold;
    }

    .user {
      font-weight: bold;
      color: #4a148c;
    }

    /* T√†i li·ªáu m·ªõi nh·∫•t */
    .latest-documents {
      width: 80%;
      margin: 30px auto;
      background-color: #f2f2f2;
      border-left: 5px solid #444;
      padding: 15px;
      border-radius: 5px;
    }

    .latest-documents h3 {
      margin-bottom: 15px;
      color: #333;
    }

    .document-item {
      background: #fff;
      padding: 10px 15px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      border-radius: 5px;
    }

    .document-item p {
      margin: 5px 0;
      display: flex;
      align-items: center;
    }

    /* Icon t√†i li·ªáu */
    .doc-icon {
      width: 24px;
      height: 24px;
      margin-right: 10px;
    }
  </style>
</head>
<body>
<!--Header / Navbar -->
<div class="navbar">
<div class="logo">BK<span>Docs</span></div>
<div class="nav-links">
<a href="Trangchu.html">Trang Ch·ªß</a>
<a href="Search.html">T√¨m ki·∫øm</a>
<a href="Baiviet.html">B√†i vi·∫øt</a>
<a href="Thongbao.html">Th√¥ng b√°o</a>
<a href="Tinnhan.html">Tin nh·∫Øn</a>
<a href="Taikhoan.html">T√†i kho·∫£n c√° nh√¢n</a>
<a href="Caidat.html">C√†i ƒë·∫∑t</a>
</div>
</div>
<!-- Ph·∫ßn t√¨m ki·∫øm -->
<div class="search-section">
<input class="search-input" placeholder="Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm..." type="text"/>
<select class="dropdown">
<option disabled="" hidden="" selected="">M√¥n h·ªçc...</option>
<option>To√°n r·ªùi r·∫°c</option>
<option>L·∫≠p tr√¨nh C</option>
<option>Kinh t·∫ø</option>
</select>
<select class="dropdown">
<option disabled="" hidden="" selected="">Lo·∫°i t√†i li·ªáu...</option>
<option>PDF</option>
<option>DOCX</option>
<option>Slide</option>
</select>
<button class="search-logo">T√¨m ki·∫øm</button>
</div>
<!-- C√¢u h·ªèi n·ªïi b·∫≠t -->
<div class="highlighted-questions">
<h3>C√¢u h·ªèi n·ªïi b·∫≠t h√¥m nay</h3>
<div class="question-thread" data-post="post_1">
<p>
<strong>[To√°n r·ªùi r·∫°c]</strong>
<span class="title">L√†m sao gi·∫£i b√†i t·∫≠p v·∫Ω bi·ªÉu ƒë·ªì Hasse?</span><br/>
      ‚Üí <strong>12 c√¢u tr·∫£ l·ªùi</strong> |
      <span class="user">üë§ user123</span>
</p>
</div>
<div class="question-thread" data-post="post_3">
<p>
<strong>[L·∫≠p tr√¨nh C]</strong>
<span class="title">Ai c√≥ slide b√†i con tr·ªè kh√¥ng?</span><br/>
      ‚Üí <strong>5 c√¢u tr·∫£ l·ªùi</strong> |
      <span class="user">üë§ coderABC</span> |
      üìé T√†i li·ªáu: 1 PDF
    </p>
</div>
</div>
<!-- T√†i li·ªáu m·ªõi nh·∫•t -->
<div class="latest-documents">
<h3>T√†i li·ªáu m·ªõi nh·∫•t</h3>
<div class="document-item">
<p>
<img alt="PDF" class="doc-icon" src="/images/pdf1.png"/>
<strong>Slide OOP - Java c∆° b·∫£n (PDF)</strong>
</p>
<p>üìÖ Ng√†y ƒëƒÉng: 10/05/2025 - 09:30</p>
</div>
<div class="document-item">
<p>
<img alt="DOCX" class="doc-icon" src="/images/W.png"/>
<strong>ƒê·ªÅ c∆∞∆°ng Kinh t·∫ø l∆∞·ª£ng (DOCX)</strong>
</p>
<p>üìÖ Ng√†y ƒëƒÉng: 09/05/2025 - 18:15</p>
</div>
</div>
<!-- Script x·ª≠ l√Ω click -->

<script>
  const token = localStorage.getItem("token");
  if (!token) {
    alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng ch·ª©c nƒÉng t√¨m ki·∫øm!");
    window.location.href = "Dangnhap.html";
  }

  document.querySelector(".search-logo").addEventListener("click", async () => {
    const keyword = document.querySelector(".search-input").value;

    try {
      const res = await fetch("/posts/search", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + token
        },
        body: JSON.stringify({ keyword })
      });

      const data = await res.json();

      const resultsContainer = document.querySelector(".latest-documents");
      resultsContainer.innerHTML = "<h3>K·∫øt qu·∫£ t√¨m ki·∫øm</h3>";

      if (res.ok && data.length > 0) {
        data.forEach(bai => {
          const item = document.createElement("div");
          item.classList.add("document-item");
          item.style.cursor = "pointer";
          item.addEventListener("click", () => {
            window.location.href = `Baiviet.html?post=${bai.bai_viet_id}`;
          });

          item.innerHTML = `
            <p><strong>${bai.tieu_de}</strong></p>
            <p>${bai.noi_dung.substring(0, 100)}...</p>
            <p>üìÖ Ng√†y ƒëƒÉng: ${new Date(bai.thoi_gian_dang).toLocaleString()}</p>
          `;
          resultsContainer.appendChild(item);
        });
      } else {
        resultsContainer.innerHTML += "<p>Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o.</p>";
      }
    } catch (err) {
      console.error("L·ªói t√¨m ki·∫øm:", err);
      alert("L·ªói k·∫øt n·ªëi t·ªõi m√°y ch·ªß.");
    }
  });
</script>

</body>
</html>
